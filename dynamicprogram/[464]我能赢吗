// åœ¨ "100 game" è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä¸¤åçŽ©å®¶è½®æµé€‰æ‹©ä»Ž 1 åˆ° 10 çš„ä»»æ„æ•´æ•°ï¼Œç´¯è®¡æ•´æ•°å’Œï¼Œå…ˆä½¿å¾—ç´¯è®¡æ•´æ•°å’Œè¾¾åˆ°æˆ–è¶…è¿‡ 100 çš„çŽ©å®¶ï¼Œå³ä¸ºèƒœè€…ã€‚
//
// å¦‚æžœæˆ‘ä»¬å°†æ¸¸æˆè§„åˆ™æ”¹ä¸º â€œçŽ©å®¶ä¸èƒ½é‡å¤ä½¿ç”¨æ•´æ•°â€ å‘¢ï¼Ÿ
//
// ä¾‹å¦‚ï¼Œä¸¤ä¸ªçŽ©å®¶å¯ä»¥è½®æµä»Žå…¬å…±æ•´æ•°æ± ä¸­æŠ½å–ä»Ž 1 åˆ° 15 çš„æ•´æ•°ï¼ˆä¸æ”¾å›žï¼‰ï¼Œç›´åˆ°ç´¯è®¡æ•´æ•°å’Œ >= 100ã€‚
//
// ç»™å®šä¸€ä¸ªæ•´æ•° maxChoosableInteger ï¼ˆæ•´æ•°æ± ä¸­å¯é€‰æ‹©çš„æœ€å¤§æ•°ï¼‰å’Œå¦ä¸€ä¸ªæ•´æ•° desiredTotalï¼ˆç´¯è®¡å’Œï¼‰ï¼Œåˆ¤æ–­å…ˆå‡ºæ‰‹çš„çŽ©å®¶æ˜¯å¦èƒ½ç¨³
// èµ¢ï¼ˆå‡è®¾ä¸¤ä½çŽ©å®¶æ¸¸æˆæ—¶éƒ½è¡¨çŽ°æœ€ä½³ï¼‰ï¼Ÿ
//
// ä½ å¯ä»¥å‡è®¾ maxChoosableInteger ä¸ä¼šå¤§äºŽ 20ï¼Œ desiredTotal ä¸ä¼šå¤§äºŽ 300ã€‚
//
// ç¤ºä¾‹ï¼š
//
// è¾“å…¥ï¼š
// maxChoosableInteger = 10
// desiredTotal = 11
//
// è¾“å‡ºï¼š
// false
//
// è§£é‡Šï¼š
// æ— è®ºç¬¬ä¸€ä¸ªçŽ©å®¶é€‰æ‹©å“ªä¸ªæ•´æ•°ï¼Œä»–éƒ½ä¼šå¤±è´¥ã€‚
// ç¬¬ä¸€ä¸ªçŽ©å®¶å¯ä»¥é€‰æ‹©ä»Ž 1 åˆ° 10 çš„æ•´æ•°ã€‚
// å¦‚æžœç¬¬ä¸€ä¸ªçŽ©å®¶é€‰æ‹© 1ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªçŽ©å®¶åªèƒ½é€‰æ‹©ä»Ž 2 åˆ° 10 çš„æ•´æ•°ã€‚
// ç¬¬äºŒä¸ªçŽ©å®¶å¯ä»¥é€šè¿‡é€‰æ‹©æ•´æ•° 10ï¼ˆé‚£ä¹ˆç´¯ç§¯å’Œä¸º 11 >= desiredTotalï¼‰ï¼Œä»Žè€Œå–å¾—èƒœåˆ©.
// åŒæ ·åœ°ï¼Œç¬¬ä¸€ä¸ªçŽ©å®¶é€‰æ‹©ä»»æ„å…¶ä»–æ•´æ•°ï¼Œç¬¬äºŒä¸ªçŽ©å®¶éƒ½ä¼šèµ¢ã€‚
//
// Related Topics æžå°åŒ–æžå¤§ åŠ¨æ€è§„åˆ’
// ðŸ‘ 181 ðŸ‘Ž 0

import java.util.Arrays;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Set;

// leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    /**
     * ç¨³èµ¢ï¼šç¬¬ä¸€ä¸ªé€‰æ‰‹å…ˆæ‰‹é€‰æ‹©æŸä¸€ä¸ªæ•°å­—åŽï¼Œæ— è®ºåŽç»­ç¬¬äºŒä¸ªé€‰æ‰‹å’Œç¬¬ä¸€ä¸ªé€‰æ‰‹æ€Žä¹ˆäº¤æ›¿é€‰æ‹©å‰©ä½™çš„æ•°å­—ï¼Œå¯ä»¥ä¿è¯æœ€åŽç¨³èµ¢
     */
    public boolean canIWin(int maxChoosableInteger, int desiredTotal) {
        if (maxChoosableInteger >= desiredTotal)
            return true;
        if (maxChoosableInteger * (maxChoosableInteger + 1) / 2 < desiredTotal)
            return false;
        // æŽ’é™¤ 0000...0
        Boolean[] dp = new Boolean[(1 << maxChoosableInteger) - 1];
        return canWin(maxChoosableInteger, desiredTotal, 0, dp);
    }

    /**
     * çŠ¶æ€åŽ‹ç¼©
     *
     */
    private boolean canWin(int maxChoosableInteger, int desiredTotal, int state, Boolean[] dp) {
        if (dp[state] != null) {
            return dp[state];
        }
        for (int i = 1; i <= maxChoosableInteger; i++) {
            int tmp = (1 << (i - 1));
            // è¯¥æ•°æ²¡æœ‰è¢«é€‰ä¸­è¿‡
            if ((tmp & state) == 0) {
                // state æ˜¯å€¼ä¼ é€’ï¼Œæ‰€ä»¥æ¯æ¬¡è¿›å…¥åˆ°ä¸‹ä¸€å±‚ï¼Œå¹¶æ²¡æœ‰æ”¹å˜æœ¬å±‚çš„stateçš„å€¼
                // å› æ­¤ä¸ç”¨åƒä½¿ç”¨ æ•°ç»„è®°å½•è¢«é€‰ä¸­çš„æ•°å­—çš„çŠ¶æ€ åŽ»åŠ¨æ€ç»´æŠ¤ stateçš„å€¼
                if (desiredTotal - i <= 0 || !canWin(maxChoosableInteger, desiredTotal - i, tmp | state, dp)) {
                    // å¦‚æžœå½“å‰çŽ©å®¶é€‰æ‹© i åŽï¼Œå‰©ä½™çš„æƒ…å†µ ä¸‹ä¸€çŽ©å®¶ç¨³è¾“ï¼Œåˆ™è¯æ˜Žå½“å‰çŽ©å®¶é€‰æ‹©iåŽç¨³èµ¢
                    dp[state] = true;
                    return true;
                }
            }
        }
        // å¦‚æžœforå¾ªçŽ¯æ‰§è¡Œå®Œæˆè¿˜æ²¡æœ‰è¿”å›žï¼Œè¯´æ˜Žå½“å‰çŽ©å®¶ç¨³è¾“
        dp[state] = false;
        return false;
    }
}
// leetcode submit region end(Prohibit modification and deletion)
